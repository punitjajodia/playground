<html>
<head>
	<title>Particle System using paperjs</title>
	<script src="js/paper.js/dist/paper-full.js"></script>
</head>
<body>

<script type="text/paperscript" canvas="canvas-1">
tool.minDistance = 10;
tool.maxDistance = 45;

var path;

function onMouseDown(event) {
	path = new Path();
	//path.strokeColor = "#000000";
	//path.selected = true;
	path.fillColor = {
		hue: Math.random() * 360,
		saturation: 1,
		brightness : 1
	};
	path.add(event.point);
}

function onMouseDrag(event){
	//path.add(event.point);

	var step = event.delta;
	step.angle += 90;

	var top = event.middlePoint + step;
	var bottom = event.middlePoint - step;

	// var line = new Path();
	// line.strokeColor = "#000000";
	// line.add(top);
	// line.add(bottom);

	path.add(top);
	path.insert(0,bottom);
	path.smooth();
}

function onMouseUp(event){
	path.add(event.point);
	path.closed = true;
	path.smooth();
}

</script>

<canvas id="canvas-1" resize="true"></canvas>


</body>
</html>